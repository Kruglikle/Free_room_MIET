# Telegram-бот свободных аудиторий МИЭТ

Бот показывает свободные аудитории МИЭТ для выбранного дня и пары/времени, агрегируя занятость по всем группам.

## Возможности
- Агрегация занятости по всем группам (не по одной).
- Автоматическая загрузка списка групп через API расписания МИЭТ.
- Сбор справочника аудиторий по всем расписаниям.
- Кэш запросов с TTL.
- Сопоставление даты и времени с номером пары.
- Пагинация длинных списков аудиторий.

## Требования
- Python 3.11+

Установка зависимостей:

```bash
python -m pip install -r requirements.txt
```

## Настройка
Создайте `.env` на основе `.env.example`:

```bash
copy .env.example .env
```

Укажите `BOT_TOKEN` в `.env`. Если `miet.ru` доступен только через Wi‑Fi интерфейс, задайте `MIET_LOCAL_ADDR` равным вашему локальному IP.

## Сбор данных
```bash
python scripts/build_groups.py
python scripts/build_rooms.py
```

## Запуск бота
```bash
python -m src.bot
```

## Команды бота
- `/start`
- `/refresh_groups` — обновить список групп
- `/refresh_rooms` — перечитать rooms.json в память

## Примечания
- Если запросы к `miet.ru` тайм-аутятся, проверьте ограничения сети и настройте `MIET_LOCAL_ADDR`.
- `groups.json` и `rooms.json` генерируются и не коммитятся в репозиторий.
